(function(n){function t(t,i){function o(){var n="page="+r.currPage;return r.ajax.param&&(n+="&"+r.ajax.param),n}function h(){var e="",t,i,f,o,u,s,h,c;if(r.panel.tipInfo_on)if(t=document.createElement("span"),t=n(t),i=t.text(r.panel.tipInfo).text(),-1!=i.indexOf("{input}"))f="<input type='text' value='"+r.currPage+"' >",i=i.replace("{input}",f),i=i.replace("{sumPage}",r.pageCount),t.html(i),f=t.children(":text:first"),f.css(r.panel.tipInfo_css),e=t.html();else if(-1!=i.indexOf("{select}")){for(o=document.createElement("select"),u=1;parseInt(r.pageCount)>=u;u++)s=new Option(u,u),o.options.add(s);t.html("");h=i.substr(0,i.indexOf("{select}"));c=i.substr(i.indexOf("{select}")+8).replace("{sumPage}",r.pageCount);t.append(h);t.append(o);t.append(c);e=t.html()}return e}function f(){u(r.id);u("ajax请求参数列表:");u(o());r.ajax.on?(r.ajax.ajaxStart(),n.ajax({url:r.ajax.url,type:r.ajax.type,data:o(),contentType:"application/x-www-form-urlencoded;utf-8",async:!0,cache:!1,timeout:6e4,error:function(){alert("访问服务器超时，请重试，谢谢！")},success:function(n){r.ajax.ajaxStop();c(n);s()}})):s()}function c(data){var pageCountId=r.ajax.pageCountId,resultPageCount=1;switch(r.ajax.dataType){case"json":try{data=eval("("+data+")")}catch(err){}finally{resultPageCount=eval("data."+pageCountId)}break;case"xml":try{resultPageCount=n(data).find(pageCountId).text()}catch(e){u("xml返回数据解析错误，使用默认的pageCount=1");resultPageCount=1}break;default:try{resultPageCount=n(data).find(":hidden[id='"+pageCountId+"']").val()}catch(e){u("html返回数据解析错误，使用默认的pageCount=1");resultPageCount=1}}u(r.id);u("返回总页数:"+resultPageCount);r.pageCount=resultPageCount;r.ajax.callback(data)}function s(){var s=r.panel.links,t;r.currPage=r.currPage>r.pageCount?r.pageCount:r.currPage;var o=r.currPage,c=parseInt(r.pageCount),a=parseInt(r.pageNumber/2),l=r.pageNumber,e="";for(r.panel.first_on&&(e="<a href='"+s+"' paged='1'>"+r.panel.first+"<\/a>"),r.panel.prev_on&&(e+=1==o?'<span class="disabled" paged="'+r.panel.prev+'">'+r.panel.prev+" <\/span>":"<a href='"+s+"' paged='"+(o-1)+"'>"+r.panel.prev+" <\/a>"),t=lastPage=1,t=o-a>0?t=o-a:1,t+l>c?(lastPage=c+1,t=lastPage-l):lastPage=t+l,0>=t&&(t=1),t;lastPage>t;t++)e+=t==o?'<span class="current" paged="'+t+'">'+t+"<\/span>":"<a href='"+s+"' paged='"+t+"'>"+t+"<\/a>";r.panel.next_on&&(e+=o==c?'<span class="disabled" paged="'+r.panel.next+'">'+r.panel.next+" <\/span>":"<a href='"+s+"' paged='"+(o+1)+"'>"+r.panel.next+" <\/a>");r.panel.last_on&&(e+="<a href='"+s+"' paged='"+c+"'>"+r.panel.last+"<\/a>");e+=h();u(r.id);u("最终生成菜单：");u(e);i.html(e);i.children("select").val(r.currPage);i.children("select").change(function(){var t=parseInt(n(this).children("option:selected").val());r.currPage=t;f()});i.children(":text").keyup(function(){var r=n(this),t=n.trim(n(this).val()),i;0!=t.length&&(i=/^\+?[0-9][0-9]*$/,i.exec(t)||r.val(1))});i.children(":text").keypress(function(t){var e=t.which,u;13==e&&(u=n.trim(n(this).val()),i.children("a").unbind("click"),i.children("a").each(function(){n(this).click(function(){return!1})}),r.currPage=u,f())});i.children("a").each(function(){var t=n(this);t.click(function(){var i=parseInt(t.attr("paged"));return i=i>0?i:1,t.children("a").unbind("click"),t.children("a").each(function(){n(this).click(function(){return!1})}),r.currPage=i,r.ajax.onClick(i),f(),n(this).focus(),!1})})}function u(t){r.debug&&n.fn.debug(t)}var l={currPage:1,pageCount:10,pageNumber:5,cssStyle:"badoo",debug:!1,ajax:{on:!1,type:"POST",pageCountId:"pageCount",url:"jsonTest.php",dataType:"json",param:!1,onClick:function(){return!1},ajaxStart:function(){return!1},ajaxStop:function(){return!1},callback:function(){return!1}},panel:{first:"首页",last:"尾页",next:"下一页",prev:"上一页",first_on:!0,last_on:!0,next_on:!0,prev_on:!0,links:"#",tipInfo_on:!1,tipInfo:"<span>&nbsp;&nbsp;跳{currText}/{sumPage}页<\/span>",tipInfo_css:{width:"22px"},tipSelect_on:!1,tipSelect:"跳转到{select} 共{sumPage}页"}},r=n.extend(!0,l,t),e;return r.id=i.attr("id"),i.addClass(r.cssStyle),f(),e={},e.id=r.id,e.getPage=function(){return r.currPage},e.onReload=function(){u("reload()");f()},e.onLoad=function(n){n&&n instanceof Object&&(u(n),r.currPage=1,r.ajax.param=n.param,f())},e.jumpPage=function(n){u("jumpPage("+n+")");n=1>n?1:n;n=n>r.pageCount?r.pageCount:n;r.currPage=n;f()},e}n.fn.myPagination=function(i){return t(i,n(this))};n.fn.debug=function(n){window.console&&window.console.log&&console.log(n)}})(jQuery);
//# sourceMappingURL=jquery.myPagination6.0.min.js.map